<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title></title>
    <style>

    html, body {
        width: 100%;
        height: 100%;
        margin: 0;
        padding: 0;
    }

    .noselect {
        -webkit-touch-callout: none;
        -webkit-user-select: none;
        -khtml-user-select: none;
        -moz-user-select: none;
        -ms-user-select: none;
        user-select: none;
    }

    #result-img {
        background-repeat: no-repeat;
        display: block;
    }
    </style>
    <script src="crop.js"></script>
</head>
<body>


    <canvas id="canvas-live" class="noselect" width="400" height="400"></canvas>
    <br>
     <input type="text" id="inp-src" value="https://s3.amazonaws.com/com.instanTag.instanTagDev.image/20151120/2929db799c0048dc55b27dcb4a09443964692cf39d5cd856cb847e1192adfa3e94517b4aee88c9b7a5677ef6461e05d0bb618154a497ee7596aec8e124e0a0fa">
    <br>
    <button id="btn-src">use src</button>
    <br>
    <input type="file" id="inp-file">
    <br>
    <button id="btn-crop">copy</button>
    <br>
    <div id="result-img" src="">
    </div>
    <div id="result-txt" style="100%; overflow-wrap: break-word; word-wrap: break-word;"></div>


    <script>
    var c = Crop('#canvas-live');

    c.setFileInput('#inp-file');
    c.setUrlInput('#inp-src', '#btn-src', 'click');

    c.setCropTrigger('#btn-crop', 'click', function(val) {

        var txt = document.querySelectorAll('#result-txt')[0];
        var img = document.querySelectorAll('#result-img')[0];

        var temp = new Image();
        console.log(val);

        if(typeof val !== 'string') {
            // obj
            txt.innerHTML = JSON.stringify(val);
            temp.onload = function() {
                img.style.background = 'url(' + val.url + ')';
                img.style.backgroundSize = temp.width + 'px ' + temp.height + 'px';
                img.style.backgroundPosition = '"' + -val.x + 'px ' + -val.y + 'px"';
            }
            temp.src = val.url;

            img.style.width = val.w + 'px';
            img.style.height = val.h + 'px';

        } else {
            // base64
            // txt.innerHTML = val;
            img.src = val;
        }

    });

    </script>
</body>
</html>
